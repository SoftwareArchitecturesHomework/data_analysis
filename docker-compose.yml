version: '3.8'

services:
  reporting-service:
    build:
      context: ./data_analysis
      dockerfile: Dockerfile
    container_name: reporting-service
    ports:
      - "5000:5000"
    environment:
      - DATABASE_URL=postgresql://user:postgrespassword@host.docker.internal:5433/workplanner?schema=workplanner
      - DIAGRAMS_PATH=/app/diagrams
      - TEMPLATES=/app/templates
      - PDF_PATH=/app/pdf_output
      - API_KEY=test-api-key-12345
      - GRPC_HOST=0.0.0.0
      - GRPC_PORT=5000
      - MSYS2_DLL_PATH=/usr/lib
    restart: unless-stopped
